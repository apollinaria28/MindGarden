<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindGarden - –í–∞—à —Å–∞–¥ —Ü–∏—Ç–∞—Ç</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon-72x72.png">
    <link rel="apple-touch-icon" href="icons/icon-152x152.png">
    <meta name="theme-color" content="#667eea">



    <!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è iOS -->
    <link rel="apple-touch-icon" href="icons/icon-152x152.png">

    <!-- –¶–≤–µ—Ç –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->
    <meta name="theme-color" content="#667eea">

    <!-- –î–ª—è iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MindGarden">

    <!-- –î–ª—è Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ -->
    <meta name="format-detection" content="telephone=no">

    <!-- –û—Ç–∫—Ä—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –≤ —ç—Ç–æ–º –∂–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ -->
    <meta name="apple-touch-fullscreen" content="yes">
   

</head>
<body>
    <div class="container">

        <!-- –§–∏–ª—å—Ç—Ä —Ç–µ–≥–æ–≤ (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <div class="tag-filter-container">
            <div class="tag-filter-header">
                <span class="filter-label">–§–∏–ª—å—Ç—Ä —Ü–∏—Ç–∞—Ç:</span>
                <select id="tagFilterSelect" class="tag-select-dropdown">
                    <option value="">–í—Å–µ —Ç–µ–≥–∏</option>
                    <!-- –¢–µ–≥–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </select>
                <button class="reset-filter-btn" id="resetFilterBtn" title="–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä">
                    ‚úï
                </button>
            </div>
            <div class="tag-stats">
                <span id="filterStats">–í—Å–µ–≥–æ —Ü–∏—Ç–∞—Ç: 0</span>
                <span id="filterTagInfo" style="display: none;">–¢–µ–∫—É—â–∏–π —Ç–µ–≥: <span id="currentTagName"></span></span>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –¶–∏—Ç–∞—Ç–∞ –¥–Ω—è -->
            <div class="quote-of-day" id="quoteOfDay">
                <div class="quote-header">
                    <span class="badge">–¶–∏—Ç–∞—Ç–∞ –¥–Ω—è</span>
                    <span class="date" id="currentDate"></span>
                </div>
                <div class="quote-content">
                    <p class="quote-text" id="dailyQuoteText">–ó–∞–≥—Ä—É–∑–∫–∞ —Ü–∏—Ç–∞—Ç—ã...</p>
                    <p class="quote-author" id="dailyQuoteAuthor"></p>
                </div>
                <div class="quote-actions">
                    <button class="action-btn" id="addToFavoritesBtn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                        <span>‚ù§Ô∏è</span> 
                    </button>
                    <button class="action-btn" id="copyQuoteBtn" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å">
                        <span>üìã</span>
                    </button>
                </div>
            </div>

            <!-- –í—Å–µ —Ü–∏—Ç–∞—Ç—ã -->
            <div class="all-quotes" id="allQuotesSection">
                <h2>–í—Å–µ —Ü–∏—Ç–∞—Ç—ã</h2>
                <div class="quotes-list" id="quotesList">
                    <!-- –¶–∏—Ç–∞—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </main>

       
        <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="bottom-nav">
            <a href="index.html" class="nav-item active">
                <span>üè†</span>
                <span>–ì–ª–∞–≤–Ω–∞—è</span>
            </a>
            <a href="favorites.html" class="nav-item">
                <span>‚≠ê</span>
                <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
            </a>
            <a href="profile-settings.html" class="nav-item">
                <span>üë§</span>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </a>
        </nav>



    <script src="db.js"></script>
    <script src="app.js"></script>
    <script src="notifications.js"></script>
    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    })
                    .catch(function(err) {
                        console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ServiceWorker:', err);
                    });
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
        window.addEventListener('load', async function() {
            const db = await initDB();
            const user = await db.getUser();
            
            if (!user || !user.selectedTags || user.selectedTags.length === 0) {
                window.location.href = 'first-launch.html';
                return;
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            initApp();
        });
    </script>
</body>
</html>